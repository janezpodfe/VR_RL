<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../img/favicon.ico">
    <title>Okolje Circle Envrionment &mdash; Spodbujevalno učenje</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:400,700">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/tonsky/FiraCode@1.206/distr/fira_code.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/all.css">
    <link rel="stylesheet" href="//use.fontawesome.com/releases/v5.8.1/css/v4-shims.css">
    <link rel="stylesheet" href="../css/theme.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
    <script>
        hljs.initHighlightingOnLoad();
    </script> 
</head>

<body ontouchstart="">
    <div id="container">
        <aside>
            <div class="home">
                <div class="title">
                    <button class="hamburger"></button>
                    <a href=".." class="site-name"> Spodbujevalno učenje</a>
                </div>
                <div class="search">
                    <div role="search">
    <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
        <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
    </form>
</div>
                </div>
            </div>
            <nav class="nav">
                <ul class="root">
                    <li class="toctree-l1"><a class="nav-item" href="..">Uvod</a></li>
                    <li class="toctree-l1"><a class="nav-item" href="../conda_env/">Priprava okolja</a><a class="nav-item" href="../conda_env/">Priprava okolja</a></li>
                    <li class="toctree-l1"><button class="section nav-item">Primer Cliff Walking</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../cliff/">Primer okolja *Cliff Walking*</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../cliff2/">Prikaz Q tabele</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../cliff3/">Parametri učenja in eksploracija</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Primer Mountain Car</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../car/">MountainCar primer</a><a class="nav-item" href="../car/">MountainCar primer</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../load_car/">Test agenta</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../car_reward/">Izpis nagrade</a><a class="nav-item" href="../car_reward/">Izpis nagrade</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../car_action/">Prikaz akcij glede na Q tabelo</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../car_DQN/">DQN</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../save_models/">Shranjevanje agentov in logiranje</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../carSB3Contrib/">Uporaba drugih algoritmov za učenje</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Primer Cart Pole</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../cart/">Cartpole primer</a><a class="nav-item" href="../cart/">Cartpole primer</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Circle Environment</button>
<ul class="subnav">
    <li class="toctree-l2 current"><a class="nav-item current" href="./">Okolje Circle Envrionment</a>
<ul class="subnav">
<li class="toctree-l3"><a class="nav-item toc" href="#uporabljene-funkcije">Uporabljene funkcije</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#spremenljivke">Spremenljivke</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#uporabljene-standardne-gym-funkcije">Uporabljene standardne gym funkcije</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#dodatne-funkcije">Dodatne funkcije</a></li>
<li class="toctree-l3"><a class="nav-item toc" href="#koda">Koda</a></li>
</ul></li>
    <li class="toctree-l2"><a class="nav-item" href="../instalCircEnv/">Inštalacija paketa CircEnv</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="../move_agent_mouse/">Premik agenta z miško</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_tocka/">Premik v točko</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_pak/">Dotik s pakom</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_pak_rob/">Pomik paka v gol</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="../circ_env_pak_gol/">Pomik paka v gol 2</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_pak_gol2/">Pomik paka v gol 3</a></li>
    <li class="toctree-l2">
<a class="nav-item" href="../circ_env_obj_gol/">Pomik naključnega objekta v gol</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_train/">Učenje</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../circ_env_robot/">Povezovanje z robotom</a></li>
</ul></li>
                    <li class="toctree-l1"><button class="section nav-item">Hockey Environment</button>
<ul class="subnav">
    <li class="toctree-l2"><a class="nav-item" href="../hockey_env/">Hockey Environment</a></li>
    <li class="toctree-l2"><a class="nav-item" href="../hockey_help_snippets/">Funkcije za pomoč pri programiranju</a></li>
</ul></li>
                </ul>
            </nav>
            <div class="repo">
    <div class="previous"><a href="../cart/">&laquo; Previous</a></div>
    <div class="next"><a href="../instalCircEnv/">Next &raquo;</a></div>
</div>
        </aside>
        <div id="spacer"><button class="arrow"></button></div>
        <main>
            <div class="home-top">
                <button class="hamburger"></button>
                <a href=".." class="site-name"> Spodbujevalno učenje</a>
            </div>
            <div id="main">
                <nav class="breadcrumbs">
<ul>
    <li>Circle Environment</li>
</ul>
</nav>
                <div id="content"><h1 id="okolje-circle-envrionment">Okolje Circle Envrionment</h1>
<p>Sledeča Python koda definira novo okolje za orodje OpenAI Gym. Okolje je pravokotno, agent v obliki kroga pa se lahko giblje v njem. Agent se mora izogibati trkom s steno oziroma mejo okolja. Gibanje agenta in trki v okolju so simulirani z uporabo knjižnic Pybox2D in prikazani s knjižnjico Pygame.</p>
<p>Okolje je definirano kot Python razred <code>CircleEnvironment</code>, ki deduje iz razreda <code>gym.Env</code>. Razred definira več funkcij, vključno s funkcijami <code>__init__()</code>, <code>reset()</code>, <code>step()</code>, <code>render()</code> in <code>close()</code>, ki so del API okolja OpenAI Gym.</p>
<h2 id="uporabljene-funkcije">Uporabljene funkcije</h2>
<p>The code imports the following libraries:</p>
<ul>
<li><strong><code>gym</code></strong>: odprtokodno orodje za razvoj in primerjavo algoritmov za spodbujevalno učenje. OpenAI Gym je zbirka orodij za razvoj in testiranje algoritmov za spodbujevalno učenje. Zagotavlja nabor okolij za testiranje in učenje agentov za spodbujevalno učenje ter standardizirane vmesnike za interakcijo z okolji.</li>
<li><code>numpy</code>: Python knjižnica za numerične izračune.</li>
<li><code>math</code>: knjižnica z matematičnimi funkcijami.</li>
<li><strong><code>pygame</code></strong>: knjižnica za razvoj iger v Pythonu. Pygame je med-platformni nabor modulov Python, zasnovan za pisanje iger. Vključuje funkcije za upravljanje grafike, zvoka, vhodnih naprav in omrežja. Pygame lahko uporabite za ustvarjanje preprostih 2D iger ali bolj zapletenih iger s fiziko in umetno inteligenco.</li>
<li><strong><code>Box2D</code></strong>: 2D fizikalni pogon za razvoj iger. Box2D je 2D fizikalni pogon za simulacije fizikalnih sistemov. Uporablja se lahko za simulacije v igrah, robotiki, računalniškem vidu in na drugih področjih. Zagotavlja realistično simulacijo trkov, sil, trenja in drugih fizikalnih interakcij med predmeti v 2D-prostoru.</li>
</ul>
<h2 id="spremenljivke">Spremenljivke</h2>
<p>Okolje uporablja naslednje spremenljivke:</p>
<ul>
<li><code>PPM</code>: število slikovnih pik na meter, uporabljenih za prikaz okolja.</li>
<li><code>TARGET_FPS</code>: hitrost osveževanja slike, ki se uporablja za prikaz okolja.</li>
<li><code>TIME_STEP</code>: dolžina trajanja posameznega časovnega koraka simulacije.</li>
<li><code>WORLD_WIDTH</code>: širina okolja v <code>Box2D</code> simulacijskih enotah [<em>m</em>].</li>
<li><code>WORLD_HEIGHT</code>: višina okolja v <code>Box2D</code> simulacijskih enotah [<em>m</em>].</li>
<li><code>metadata</code>: slovar (<em>ang. dictionary</em>), ki vsebuje metapodatke o okolju, vključno s razpoložljivimi načini prikazovanje okolja in hitrostjo osveževanja slike.</li>
<li><code>contact_listener</code>: an instance of a custom contact listener class that is used to detect collisions between the agent and the environment.</li>
</ul>
<h2 id="uporabljene-standardne-gym-funkcije">Uporabljene standardne <strong><code>gym</code></strong> funkcije</h2>
<p>Okolje vsebuje naslednje funkcije:</p>
<ul>
<li><code>__init__()</code>: funkcija inicializacije okolja. Nastavi parametre okolja, inicializira svet (<em>ang. world</em>) Pybox2D in nastavi dimenzije za stanja (<em>observation space</em>) in akcije (<em>action space</em>).</li>
<li><code>_get_obs()</code>: funkcija, ki vrne trenutno stanje agenta oziroma okolja, tj. njegovo pozicijo v svetu.</li>
<li><code>reset()</code>:  funkcija, ki ponastavi okolje na njegovo začetno stanje in vrne začetno stanje.</li>
<li><code>step()</code>: funkcija, ki kot vhod sprejme akcijo, simulira okolje za en korak časa in vrne novo stanje, nagrado, zastavico <code>done</code> in dodatne informacije o simulaciji.</li>
<li><code>render()</code>:  funkcija, ki prikaže okolje z uporabo izbranega načina prikaza.</li>
<li><code>_render_frame()</code>: funkcija, ki prikaže posamezno sliko okolja.</li>
<li><code>close()</code>: funkcija, ki pobriše svet Pybox2D in agenta ter zapre okno Pygame.</li>
</ul>
<h2 id="dodatne-funkcije">Dodatne funkcije</h2>
<ul>
<li>
<p><code>_is_collision(object, goal)</code>: Checks if there is a collision between the body object and the body goal. It takes in two b2Body objects, object and goal, and returns a boolean indicating whether there is a collision. It can take any two <code>Box2D</code> b2Body objects to check collison between them and not just body object and the body goal.</p>
</li>
<li>
<p><code>create_agent(radius_px)</code>: Creates a new b2Body object representing the agent. It takes in the radius of the agent in pixels, <code>radius_px</code>.</p>
</li>
<li>
<p><code>create_puck(radius_px, type)</code>: Creates a new b2Body object representing the puck. It takes in the radius of the puck in pixels, <code>radius_px</code>, and a string <code>type</code> that indicates whether the puck should be a dynamic object ('d') or a kinematic object ('k').</p>
</li>
<li>
<p><code>create_goal(dim_px, position)</code>: Creates a new b2Body object representing the goal. It takes in a tuple <code>dim_px</code>representing the dimensions of the goal in pixels, and a tuple <code>position</code> representing the position of the goal in the simulation.</p>
</li>
<li>
<p><code>create_circ_target(radius_px)</code>: Creates a new circular target. It takes in the radius of the target in pixels, radius_px.</p>
</li>
<li>
<p><code>create_random_object(radius_px)</code>: Creates a new random object with a random shape. It takes in the radius of the object in pixels, radius_px..</p>
</li>
<li>
<p><code>create_border()</code>: Creates the boundary of the simulation.</p>
</li>
<li>
<p><code>get_agent_position()</code>: Returns the current position of the agent as a numpy array.</p>
</li>
<li>
<p><code>get_puck_position()</code>: Returns the current position of the puck as a numpy array.</p>
</li>
<li>
<p><code>get_puck_velocity()</code>: Returns the current velocity of the puck as a numpy array.</p>
</li>
<li>
<p><code>get_target_position()</code>: Returns the current position of the target as a numpy array.</p>
</li>
<li>
<p><code>reset_agent(position)</code>: Resets the position and velocity of the agent to a specified position.</p>
</li>
<li>
<p><code>reset_puck(position)</code>: Resets the position and velocity of the puck to a specified position.</p>
</li>
<li>
<p><code>reset_target(position)</code>: Resets the position of the target to a specified position.</p>
</li>
<li>
<p><code>reset_random_object(position)</code>: Resets the position and velocity of the random object to a specified position.</p>
</li>
<li>
<p><code>set_agent_velocity(vel)</code>: This function sets the linear and angular velocity of the agent in the Box2D world. The input parameter vel is a tuple containing the x and y components of the velocity. The velocity is converted to a b2Vec2 object before being assigned to the agent.</p>
</li>
<li>
<p><code>set_puck_velocity(vel)</code>: This function sets the linear and angular velocity of the puck in the Box2D world. The input parameter vel is a tuple containing the x and y components of the velocity. The velocity is converted to a b2Vec2 object before being assigned to the puck.</p>
</li>
<li>
<p><code>limit_puck_velocity(maximal_velocity)</code>: This function limits the velocity of a puck object to the maximum velocity specified by <code>maximal_velocity</code>. The function takes a single input parameter, <code>maximal_velocity</code>, which is a float value representing the maximum velocity allowed. The function does not return any values.</p>
</li>
<li>
<p><code>draw_agent(color)</code>: This function draws the agent as a circle on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color. The position of the agent is converted to Pygame coordinates before drawing.</p>
</li>
<li>
<p><code>draw_puck(color)</code>: This function draws the puck as a circle on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color. The position of the puck is converted to Pygame coordinates before drawing.</p>
</li>
<li>
<p><code>draw_border(color)</code>: This function draws the border of the game as a rectangle on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color.</p>
</li>
<li>
<p><code>draw_target(color)</code>: This function draws the target as a circle on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color. The position of the target is converted to Pygame coordinates before drawing.</p>
</li>
<li>
<p><code>draw_goal(color)</code>: This function draws the goal as a polygon on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color.</p>
</li>
<li>
<p><code>draw_random_object(color)</code>: This function draws a random object as a polygon on the Pygame screen. The input parameter color is a tuple containing the RGB values of the color. The position, angle and vertices of the object are converted to Pygame coordinates before drawing.</p>
</li>
<li>
<p><code>is_agent_outside_screen()</code>: This function checks if the agent is outside the screen or not. It returns True if the agent is outside the screen, otherwise it returns False.</p>
</li>
<li>
<p><code>calc_distance(pos1, pos2)</code>: This function calculates the Euclidean distance between two points. The input parameters pos1 and pos2 are tuples containing the x and y coordinates of the points.</p>
</li>
<li>
<p><code>unit_vector(pos1, pos2)</code>: This function calculates the unit vector pointing from pos1 to pos2. The input parameters pos1 and pos2 are tuples containing the x and y coordinates of the points. The function returns the unit vector as a numpy array.</p>
</li>
<li>
<p><code>calculate_component(pos_agent, pos_target, vel)</code>: This function calculates the component of the velocity <code>vel</code> in the direction of the unit vector pointing from <code>pos_agent</code> to <code>pos_target</code>. The input parameters <code>pos_agent</code> and <code>pos_target</code> are tuples containing the x and y coordinates of the points, while <code>vel</code> is a numpy array representing the velocity vector. The function returns the component of <code>vel</code> as a float value.</p>
</li>
<li>
<p><code>move_agent_mouse()</code>: This function calculates the movement action of the agent based on the position of the mouse relative to the agent's position. The function returns the <code>action</code> as a numpy array.</p>
</li>
</ul>
<h2 id="koda">Koda</h2>
<h3 id="hiter-pregled-kode">Hiter pregled kode</h3>
<h4 id="ustvarimo-agenta-dolocimo-observation_space-in-action_space">Ustvarimo agenta, določimo <code>observation_space</code> in <code>action_space</code>.</h4>
<ul>
<li><code>__init__()</code>
<div class="language-py highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">observation_space</span> <span class="o">=</span> <span class="n">spaces</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span><span class="n">low</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),</span> <span class="n">high</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">]),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">action_space</span> <span class="o">=</span> <span class="n">spaces</span><span class="o">.</span><span class="n">Box</span><span class="p">(</span><span class="n">low</span><span class="o">=-</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">high</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">2</span><span class="p">,),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_agent</span><span class="p">(</span><span class="n">agent_radius_px</span><span class="p">)</span>        
</span></code></pre></div></li>
</ul>
<h3 id="potrebujemo-vsaj-en-podatek-za-observacijo">Potrebujemo vsaj en podatek za observacijo.</h3>
<ul>
<li><code>_get_obs()</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>        <span class="n">agent_pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_agent_position</span><span class="p">()</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        <span class="k">return</span> <span class="n">agent_pos</span>
</span></code></pre></div>
<h4 id="ponastavimo-agenta-v-reset-funkciji">Ponastavimo agenta v <code>reset()</code> funkciji.</h4>
<ul>
<li><code>reset()</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">reset_agent</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent_radius</span><span class="o">*</span><span class="mf">1.5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_radius</span><span class="o">*</span><span class="mf">1.5</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent_radius</span><span class="o">*</span><span class="mf">1.5</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">agent_radius</span><span class="o">*</span><span class="mf">1.5</span><span class="p">)))</span>
</span></code></pre></div>
<h4 id="naredimo-korak-v-step-funkciji">Naredimo korak v <code>step()</code> funkciji.</h4>
<ul>
<li><code>step()</code></li>
</ul>
<p>Premik agenta za <code>action</code></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">set_agent_velocity</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span></code></pre></div>
<p>Določimo <code>obs</code> spremenljivko.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>        <span class="n">obs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_obs</span><span class="p">()</span>
</span></code></pre></div>
<p>Določimo, <code>reward</code> in <code>done</code> spremenljivki. Za začetek inicializacija:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>        <span class="n">reward</span> <span class="o">=</span> <span class="mf">0.0</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>        <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span> 
</span></code></pre></div>
<p>Nato lahko določimo osnovne pogoje:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_step</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">time_steps</span><span class="p">:</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>            <span class="c1">#reward = -1.0</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
</span></code></pre></div>
<h4 id="izrisemo-agenta">izrišemo agenta</h4>
<ul>
<li><code>_render_frame()</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_agent</span><span class="p">(</span><span class="n">green</span><span class="p">)</span>
</span></code></pre></div>
<h4 id="na-koncu-izbrisemo-agenta-v-close-funkciji">Na koncu izbrišemo agenta v <code>close()</code> funkciji</h4>
<ul>
<li><code>close()</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">world</span><span class="o">.</span><span class="n">DestroyBody</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="zazenemo-okolje">Zaženemo okolje</h3>
<p>Zaženi skripto <code>playCirc.py</code></p>
<div class="language-console highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="go">python3 playCirc.py</span>
</span></code></pre></div>
<h4 id="premikanje-agenta-s-tipkovnico">Premikanje agenta s tipkovnico</h4>
<p>V skripti povečajte hitrost na maksimalno hitrost <code>2</code>.</p>
<div class="language-py highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">playCirc.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-14">14</a></span>
<span class="normal"><a href="#__codelineno-10-15">15</a></span>
<span class="normal"><a href="#__codelineno-10-16">16</a></span>
<span class="normal"><a href="#__codelineno-10-17">17</a></span>
<span class="normal"><a href="#__codelineno-10-18">18</a></span>
<span class="normal"><a href="#__codelineno-10-19">19</a></span>
<span class="normal"><a href="#__codelineno-10-20">20</a></span>
<span class="normal"><a href="#__codelineno-10-21">21</a></span>
<span class="normal"><a href="#__codelineno-10-22">22</a></span>
<span class="normal"><a href="#__codelineno-10-23">23</a></span>
<span class="normal"><a href="#__codelineno-10-24">24</a></span>
<span class="normal"><a href="#__codelineno-10-25">25</a></span>
<span class="normal"><a href="#__codelineno-10-26">26</a></span>
<span class="normal"><a href="#__codelineno-10-27">27</a></span>
<span class="normal"><a href="#__codelineno-10-28">28</a></span>
<span class="normal"><a href="#__codelineno-10-29">29</a></span>
<span class="normal"><a href="#__codelineno-10-30">30</a></span>
<span class="normal"><a href="#__codelineno-10-31">31</a></span>
<span class="normal"><a href="#__codelineno-10-32">32</a></span>
<span class="normal"><a href="#__codelineno-10-33">33</a></span>
<span class="normal"><a href="#__codelineno-10-34">34</a></span>
<span class="normal"><a href="#__codelineno-10-35">35</a></span>
<span class="normal"><a href="#__codelineno-10-36">36</a></span>
<span class="normal"><a href="#__codelineno-10-37">37</a></span>
<span class="normal"><a href="#__codelineno-10-38">38</a></span>
<span class="normal"><a href="#__codelineno-10-39">39</a></span>
<span class="normal"><a href="#__codelineno-10-40">40</a></span>
<span class="normal"><a href="#__codelineno-10-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-14"><a id="__codelineno-10-14" name="__codelineno-10-14"></a><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-10-15"><a id="__codelineno-10-15" name="__codelineno-10-15"></a>
</span><span id="__span-10-16"><a id="__codelineno-10-16" name="__codelineno-10-16"></a>    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">pygame</span><span class="o">.</span><span class="n">QUIT</span> <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">()]):</span> <span class="k">break</span>
</span><span id="__span-10-17"><a id="__codelineno-10-17" name="__codelineno-10-17"></a>
</span><span id="__span-10-18"><a id="__codelineno-10-18" name="__codelineno-10-18"></a>    <span class="c1">#player controls</span>
</span><span id="__span-10-19"><a id="__codelineno-10-19" name="__codelineno-10-19"></a>    <span class="n">keys</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">key</span><span class="o">.</span><span class="n">get_pressed</span><span class="p">()</span> 
</span><span id="__span-10-20"><a id="__codelineno-10-20" name="__codelineno-10-20"></a><span class="hll">    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_LEFT</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span></span><span id="__span-10-21"><a id="__codelineno-10-21" name="__codelineno-10-21"></a><span class="hll">    <span class="k">elif</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_RIGHT</span><span class="p">]:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span id="__span-10-22"><a id="__codelineno-10-22" name="__codelineno-10-22"></a>    <span class="k">else</span><span class="p">:</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-10-23"><a id="__codelineno-10-23" name="__codelineno-10-23"></a><span class="hll">    <span class="k">if</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_UP</span><span class="p">]:</span> <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span></span><span id="__span-10-24"><a id="__codelineno-10-24" name="__codelineno-10-24"></a><span class="hll">    <span class="k">elif</span> <span class="n">keys</span><span class="p">[</span><span class="n">pygame</span><span class="o">.</span><span class="n">K_DOWN</span><span class="p">]:</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span id="__span-10-25"><a id="__codelineno-10-25" name="__codelineno-10-25"></a>    <span class="k">else</span><span class="p">:</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>   
</span><span id="__span-10-26"><a id="__codelineno-10-26" name="__codelineno-10-26"></a>
</span><span id="__span-10-27"><a id="__codelineno-10-27" name="__codelineno-10-27"></a>    <span class="n">action</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">],</span><span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>
</span><span id="__span-10-28"><a id="__codelineno-10-28" name="__codelineno-10-28"></a>
</span><span id="__span-10-29"><a id="__codelineno-10-29" name="__codelineno-10-29"></a>    <span class="c1">#action = env.action_space.sample()</span>
</span><span id="__span-10-30"><a id="__codelineno-10-30" name="__codelineno-10-30"></a>    <span class="c1">#print(action)</span>
</span><span id="__span-10-31"><a id="__codelineno-10-31" name="__codelineno-10-31"></a>    <span class="n">obs</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span><span id="__span-10-32"><a id="__codelineno-10-32" name="__codelineno-10-32"></a>
</span><span id="__span-10-33"><a id="__codelineno-10-33" name="__codelineno-10-33"></a>    <span class="c1"># Render the environment</span>
</span><span id="__span-10-34"><a id="__codelineno-10-34" name="__codelineno-10-34"></a>    <span class="n">env</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
</span><span id="__span-10-35"><a id="__codelineno-10-35" name="__codelineno-10-35"></a>
</span><span id="__span-10-36"><a id="__codelineno-10-36" name="__codelineno-10-36"></a>    <span class="c1"># Check if the episode is finished</span>
</span><span id="__span-10-37"><a id="__codelineno-10-37" name="__codelineno-10-37"></a>    <span class="k">if</span> <span class="n">done</span><span class="p">:</span>
</span><span id="__span-10-38"><a id="__codelineno-10-38" name="__codelineno-10-38"></a>        <span class="n">obs</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-10-39"><a id="__codelineno-10-39" name="__codelineno-10-39"></a>
</span><span id="__span-10-40"><a id="__codelineno-10-40" name="__codelineno-10-40"></a><span class="c1"># Close the environment</span>
</span><span id="__span-10-41"><a id="__codelineno-10-41" name="__codelineno-10-41"></a><span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
<h3 id="dodajmo-osnovno-mejo">Dodajmo osnovno mejo</h3>
<ul>
<li><code>__init__()</code></li>
</ul>
<p><div class="language-py highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">create_border</span><span class="p">()</span>    
</span></code></pre></div>
- <code>_render_frame()</code></p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">draw_border</span><span class="p">(</span><span class="n">black</span><span class="p">)</span>
</span></code></pre></div>
<p>Zaključimo episodo, ko se agent dotakne meje.</p>
<ul>
<li><code>step()</code></li>
</ul>
<div class="language-py highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_collision</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">agent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">border</span><span class="p">):</span>
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>            <span class="n">reward</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span>
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>            <span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>  
</span></code></pre></div></div>
                <footer>
    <div class="footer-buttons">
        <div class="previous"><a href="../cart/" title="Cartpole primer"><span>Previous</span></a></div>
        <div class="next"><a href="../instalCircEnv/" title="Inštalacija paketa CircEnv"><span>Next</span></a></div>
    </div>
    <div class="footer-note">
        <p>
            Built with <a href="http://www.mkdocs.org">MkDocs</a> using
            <a href="https://github.com/daizutabi/mkdocs-ivory">Ivory theme</a>.
        </p>
    </div>
</footer>
            </div>
        </main>
    </div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
    <script src="../search/main.js"></script>
</body>

</html>