
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../circ_env_train/">
      
      
        <link rel="next" href="../hockey_env/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.1">
    
    
      
        <title>Povezovanje z robotom - Spodbujevalno učenje</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.402914a4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#povezovanje-z-robotom" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Spodbujevalno učenje" class="md-header__button md-logo" aria-label="Spodbujevalno učenje" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Spodbujevalno učenje
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Povezovanje z robotom
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Spodbujevalno učenje" class="md-nav__button md-logo" aria-label="Spodbujevalno učenje" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Spodbujevalno učenje
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Uvod
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../conda_env/" class="md-nav__link">
        Priprava okolja
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Primer Cliff Walking
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Primer Cliff Walking
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cliff/" class="md-nav__link">
        Primer okolja *Cliff Walking*
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cliff2/" class="md-nav__link">
        Prikaz Q tabele
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cliff3/" class="md-nav__link">
        Parametri učenja in eksploracija
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Primer Mountain Car
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Primer Mountain Car
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../car/" class="md-nav__link">
        MountainCar primer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../load_car/" class="md-nav__link">
        Test agenta
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../car_reward/" class="md-nav__link">
        Izpis nagrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../car_action/" class="md-nav__link">
        Prikaz akcij glede na Q tabelo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../car_DQN/" class="md-nav__link">
        DQN
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../save_models/" class="md-nav__link">
        Shranjevanje agentov in logiranje
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../carSB3Contrib/" class="md-nav__link">
        Uporaba drugih algoritmov za učenje
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Primer Cart Pole
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Primer Cart Pole
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cart/" class="md-nav__link">
        Cartpole primer
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Circle Environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Circle Environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_slo/" class="md-nav__link">
        Okolje Circle Envrionment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../instalCircEnv/" class="md-nav__link">
        Inštalacija paketa CircEnv
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../move_agent_mouse/" class="md-nav__link">
        Premik agenta z miško
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_tocka/" class="md-nav__link">
        Premik v točko
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_pak/" class="md-nav__link">
        Dotik s pakom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_pak_rob/" class="md-nav__link">
        Pomik paka v gol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_pak_gol/" class="md-nav__link">
        Pomik paka v gol 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_pak_gol2/" class="md-nav__link">
        Pomik paka v gol 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_obj_gol/" class="md-nav__link">
        Pomik naključnega objekta v gol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../circ_env_train/" class="md-nav__link">
        Učenje
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Povezovanje z robotom
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Povezovanje z robotom
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#povezovanje-z-robotom-poteka-preko-udp-komunikacije" class="md-nav__link">
    Povezovanje z robotom poteka preko UDP komunikacije.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predelana-koda-za-komunikacijo-z-robotom" class="md-nav__link">
    Predelana koda za komunikacijo z robotom
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-agenti" class="md-nav__link">
    AI agenti
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zagon-na-robotu" class="md-nav__link">
    Zagon na robotu
  </a>
  
    <nav class="md-nav" aria-label="Zagon na robotu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unity-simulink" class="md-nav__link">
    Unity &amp; Simulink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unity" class="md-nav__link">
    Unity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulink" class="md-nav__link">
    Simulink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu-linux-rt-libfranka" class="md-nav__link">
    Ubuntu Linux RT Libfranka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postopek-zaganjanja" class="md-nav__link">
    Postopek zaganjanja
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videji-primera-na-robotu" class="md-nav__link">
    Videji primera na robotu
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Hockey Environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Hockey Environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hockey_env/" class="md-nav__link">
        Hockey Environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../hockey_help_snippets/" class="md-nav__link">
        Funkcije za pomoč pri programiranju
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#povezovanje-z-robotom-poteka-preko-udp-komunikacije" class="md-nav__link">
    Povezovanje z robotom poteka preko UDP komunikacije.
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predelana-koda-za-komunikacijo-z-robotom" class="md-nav__link">
    Predelana koda za komunikacijo z robotom
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ai-agenti" class="md-nav__link">
    AI agenti
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#zagon-na-robotu" class="md-nav__link">
    Zagon na robotu
  </a>
  
    <nav class="md-nav" aria-label="Zagon na robotu">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#unity-simulink" class="md-nav__link">
    Unity &amp; Simulink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unity" class="md-nav__link">
    Unity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simulink" class="md-nav__link">
    Simulink
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ubuntu-linux-rt-libfranka" class="md-nav__link">
    Ubuntu Linux RT Libfranka
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#postopek-zaganjanja" class="md-nav__link">
    Postopek zaganjanja
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#videji-primera-na-robotu" class="md-nav__link">
    Videji primera na robotu
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div><h1 id="povezovanje-z-robotom">Povezovanje z robotom</h1>
<h2 id="povezovanje-z-robotom-poteka-preko-udp-komunikacije">Povezovanje z robotom poteka preko UDP komunikacije.</h2>
<p>Za prikaz spodbujevalnega učenja na dejanskem robotu boste uporabili robota Franka Emika Panda, zaslon, ki je nameščen v delovnem prostoru robota, in IR senzorje za zaznavanje predmetov na zaslonu. Zaslon je prekrit s prozorno površino (pleksi steklo) z robovi in deluje kot delovni prostor za igralno okolje. Predmeti so postavljeni na površino iz pleksi stekla, IR-senzorji pa so nameščeni ob robu površine iz pleksi stekla.
Franka Emika Panda je sodelujoč robotski manipulator s sedmimi stopnjami prostosti, senzorjem navora v vsakem sklepu, dosegom 855 mm in nosilnostjo 3 kg. Na vrhu ima prijemalo, s katerim lahko zgrabi predmete ali orodja. V našem primeru bomo uporabili 3D-natisnjeno orodje, ki predstavlja agenta. Robota se upravlja s shemo Simulink, ki pošilja podatke krmilniku robota prek protokola UDP (User Datagram Protocol). 
Za vizualizacijo okolja se uporablja simulacijski zaslon v programu Unity, pravtako se za pošiljanje podatkov iz sheme Simulink v program Unity uporablja protokol UDP. Zaslon služi kot senzor za zaznavanje položaja predmetov na njem s pomočjo IR-senzorjev na robovih. Ko predmet prekine žarek, lahko sistem zazna in izmeri njegov položaj.</p>
<p>Arhitektura celotnega sistema je prikazana na spodnji sliki. Agent se izvaja na ločenem računalniku in pošilja položaj agenta (puščica številka 1 na sliki 2) na računalnik, na katerem teče model Simulink in vizualizacija Unity. Model Simulink pošilja podatke za vodenje robota krmilniku robota (puščica številka 2). Na zaslonu se prikaže vizualizacija Unity. IR-senzorji zaznajo položaj predmeta v delovnem prostoru okolja in ga pošljejo v računalnik z modelom Simulink in vizualizacijo Unity (puščica številka 3). Stanje okolja se nazadnje pošlje nazaj v računalnik, ki izračuna dejanja agenta (puščica številka 4).</p>
<p><img alt="" src="../images/robot_povezava1.png"></p>
<p><strong>Slika z robotom in zaslonom</strong></p>
<p><img alt="" loading="lazy" src="../images/panda_zaslon_white.jpg" width="450"></p>
<p><strong>Orodje</strong></p>
<p><img alt="" loading="lazy" src="../images/panda_prijemalo_white.jpg" width="300"></p>
<p><strong>Primer premikanja v točko</strong></p>
<p><img alt="" loading="lazy" src="../images/robot_povezava2.png" width="600"></p>
<p><strong>Primer potiskanja žogice</strong></p>
<p><img alt="" loading="lazy" src="../images/robot_povezava3.png" width="600"></p>
<p><strong>Primer potiskanja naključnega objekta</strong></p>
<p><img alt="" src="../images/robot_povezava4.png"></p>
<h2 id="predelana-koda-za-komunikacijo-z-robotom">Predelana koda za komunikacijo z robotom</h2>
<div class="language-py highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">load_circ_modelUDP.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-0-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-0-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-0-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-0-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-0-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-0-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-0-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-0-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-0-10">10</a></span>
<span class="normal"><a href="#__codelineno-0-11">11</a></span>
<span class="normal"><a href="#__codelineno-0-12">12</a></span>
<span class="normal"><a href="#__codelineno-0-13">13</a></span>
<span class="normal"><a href="#__codelineno-0-14">14</a></span>
<span class="normal"><a href="#__codelineno-0-15">15</a></span>
<span class="normal"><a href="#__codelineno-0-16">16</a></span>
<span class="normal"><a href="#__codelineno-0-17">17</a></span>
<span class="normal"><a href="#__codelineno-0-18">18</a></span>
<span class="normal"><a href="#__codelineno-0-19">19</a></span>
<span class="normal"><a href="#__codelineno-0-20">20</a></span>
<span class="normal"><a href="#__codelineno-0-21">21</a></span>
<span class="normal"><a href="#__codelineno-0-22">22</a></span>
<span class="normal"><a href="#__codelineno-0-23">23</a></span>
<span class="normal"><a href="#__codelineno-0-24">24</a></span>
<span class="normal"><a href="#__codelineno-0-25">25</a></span>
<span class="normal"><a href="#__codelineno-0-26">26</a></span>
<span class="normal"><a href="#__codelineno-0-27">27</a></span>
<span class="normal"><a href="#__codelineno-0-28">28</a></span>
<span class="normal"><a href="#__codelineno-0-29">29</a></span>
<span class="normal"><a href="#__codelineno-0-30">30</a></span>
<span class="normal"><a href="#__codelineno-0-31">31</a></span>
<span class="normal"><a href="#__codelineno-0-32">32</a></span>
<span class="normal"><a href="#__codelineno-0-33">33</a></span>
<span class="normal"><a href="#__codelineno-0-34">34</a></span>
<span class="normal"><a href="#__codelineno-0-35">35</a></span>
<span class="normal"><a href="#__codelineno-0-36">36</a></span>
<span class="normal"><a href="#__codelineno-0-37">37</a></span>
<span class="normal"><a href="#__codelineno-0-38">38</a></span>
<span class="normal"><a href="#__codelineno-0-39">39</a></span>
<span class="normal"><a href="#__codelineno-0-40">40</a></span>
<span class="normal"><a href="#__codelineno-0-41">41</a></span>
<span class="normal"><a href="#__codelineno-0-42">42</a></span>
<span class="normal"><a href="#__codelineno-0-43">43</a></span>
<span class="normal"><a href="#__codelineno-0-44">44</a></span>
<span class="normal"><a href="#__codelineno-0-45">45</a></span>
<span class="normal"><a href="#__codelineno-0-46">46</a></span>
<span class="normal"><a href="#__codelineno-0-47">47</a></span>
<span class="normal"><a href="#__codelineno-0-48">48</a></span>
<span class="normal"><a href="#__codelineno-0-49">49</a></span>
<span class="normal"><a href="#__codelineno-0-50">50</a></span>
<span class="normal"><a href="#__codelineno-0-51">51</a></span>
<span class="normal"><a href="#__codelineno-0-52">52</a></span>
<span class="normal"><a href="#__codelineno-0-53">53</a></span>
<span class="normal"><a href="#__codelineno-0-54">54</a></span>
<span class="normal"><a href="#__codelineno-0-55">55</a></span>
<span class="normal"><a href="#__codelineno-0-56">56</a></span>
<span class="normal"><a href="#__codelineno-0-57">57</a></span>
<span class="normal"><a href="#__codelineno-0-58">58</a></span>
<span class="normal"><a href="#__codelineno-0-59">59</a></span>
<span class="normal"><a href="#__codelineno-0-60">60</a></span>
<span class="normal"><a href="#__codelineno-0-61">61</a></span>
<span class="normal"><a href="#__codelineno-0-62">62</a></span>
<span class="normal"><a href="#__codelineno-0-63">63</a></span>
<span class="normal"><a href="#__codelineno-0-64">64</a></span>
<span class="normal"><a href="#__codelineno-0-65">65</a></span>
<span class="normal"><a href="#__codelineno-0-66">66</a></span>
<span class="normal"><a href="#__codelineno-0-67">67</a></span>
<span class="normal"><a href="#__codelineno-0-68">68</a></span>
<span class="normal"><a href="#__codelineno-0-69">69</a></span>
<span class="normal"><a href="#__codelineno-0-70">70</a></span>
<span class="normal"><a href="#__codelineno-0-71">71</a></span>
<span class="normal"><a href="#__codelineno-0-72">72</a></span>
<span class="normal"><a href="#__codelineno-0-73">73</a></span>
<span class="normal"><a href="#__codelineno-0-74">74</a></span>
<span class="normal"><a href="#__codelineno-0-75">75</a></span>
<span class="normal"><a href="#__codelineno-0-76">76</a></span>
<span class="normal"><a href="#__codelineno-0-77">77</a></span>
<span class="normal"><a href="#__codelineno-0-78">78</a></span>
<span class="normal"><a href="#__codelineno-0-79">79</a></span>
<span class="normal"><a href="#__codelineno-0-80">80</a></span>
<span class="normal"><a href="#__codelineno-0-81">81</a></span>
<span class="normal"><a href="#__codelineno-0-82">82</a></span>
<span class="normal"><a href="#__codelineno-0-83">83</a></span>
<span class="normal"><a href="#__codelineno-0-84">84</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">gym</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="kn">from</span> <span class="nn">sb3_contrib</span> <span class="kn">import</span> <span class="n">TQC</span>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="c1">#from stable_baselines3 import PPO</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="kn">import</span> <span class="nn">circ_env</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="hll"><span class="kn">import</span> <span class="nn">socket</span>
</span></span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="hll"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="hll"><span class="kn">import</span> <span class="nn">struct</span>
</span></span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="n">env</span> <span class="o">=</span> <span class="n">gym</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="s1">'circ_env/Circle-v0'</span><span class="p">,</span> <span class="n">render_mode</span><span class="o">=</span><span class="s2">"human"</span><span class="p">)</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="hll"><span class="n">client_ip</span> <span class="o">=</span> <span class="s2">"192.168.65.194"</span>
</span></span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="hll"><span class="n">port_send</span>  <span class="o">=</span> <span class="mi">1026</span>
</span></span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="hll"><span class="n">send_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
</span></span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="hll">
</span></span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="hll"><span class="n">port_rec</span>  <span class="o">=</span> <span class="mi">1027</span>
</span></span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="hll"><span class="n">rec_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="o">.</span><span class="n">AF_INET</span><span class="p">,</span> <span class="n">socket</span><span class="o">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
</span></span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="hll"><span class="n">rec_socket</span><span class="o">.</span><span class="n">bind</span><span class="p">((</span><span class="s2">"0.0.0.0"</span><span class="p">,</span><span class="n">port_rec</span><span class="p">))</span>
</span></span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="hll"><span class="c1">#rec_socket.settimeout(1.0)  # Set timeout to 1 second</span>
</span></span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="n">model</span> <span class="o">=</span> <span class="n">TQC</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">"./models/TQC/11111"</span><span class="p">,</span> <span class="n">env</span><span class="o">=</span><span class="n">env</span><span class="p">)</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="nb">print</span><span class="p">(</span><span class="s2">"Model loaded."</span><span class="p">)</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="c1"># Reset the environment</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="n">obs</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="n">EPISODES</span> <span class="o">=</span> <span class="mi">1000</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="k">for</span> <span class="n">episode</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">EPISODES</span><span class="p">):</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"Episode: "</span><span class="p">,</span> <span class="n">episode</span><span class="p">)</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a>    <span class="n">obs</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a>    <span class="n">done</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a>    <span class="n">total_reward</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a>    <span class="k">while</span> <span class="ow">not</span> <span class="n">done</span><span class="p">:</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="hll">        <span class="c1">#lokacija pucka na plošči</span>
</span></span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="hll">        <span class="k">try</span><span class="p">:</span>
</span></span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="hll">            <span class="c1"># Attempt to receive up to 1024 bytes of data</span>
</span></span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="hll">            <span class="nb">print</span><span class="p">(</span><span class="s2">"Try to receive data."</span><span class="p">)</span>
</span></span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="hll">            <span class="n">data</span><span class="p">,</span> <span class="n">addr</span> <span class="o">=</span> <span class="n">rec_socket</span><span class="o">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</span></span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="hll">            <span class="n">puck_values</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">'2f'</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span></span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="hll">        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
</span></span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="hll">            <span class="c1"># Handle timeout exception</span>
</span></span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a><span class="hll">            <span class="nb">print</span><span class="p">(</span><span class="s2">"Timeout occurred while receiving data."</span><span class="p">)</span>             
</span></span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="hll">        <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">error</span><span class="p">:</span>
</span></span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="hll">            <span class="c1"># If no data is received, you get here, but it's not an error</span>
</span></span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="hll">            <span class="c1"># Ignore and continue</span>
</span></span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="hll">            <span class="nb">print</span><span class="p">(</span><span class="s2">"noData"</span><span class="p">)</span>
</span></span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="hll">            <span class="k">pass</span>
</span></span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="hll">
</span></span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="hll">        <span class="c1">#print(puck_values)</span>
</span></span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a><span class="hll">
</span></span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="hll">        <span class="n">puck_pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">puck_values</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">puck_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
</span></span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">"puck_values"</span><span class="p">,</span> <span class="n">puck_values</span><span class="p">)</span>
</span></span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="hll">        <span class="c1">#center simulink [0,0]</span>
</span></span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="hll">        <span class="n">puck_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">env</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span>
</span></span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="hll">        <span class="n">puck_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">env</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span>
</span></span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="hll">        <span class="c1">#pixel to m</span>
</span></span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="hll">        <span class="n">puck_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="n">env</span><span class="o">.</span><span class="n">PPM</span>
</span></span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="hll">        <span class="n">puck_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">env</span><span class="o">.</span><span class="n">PPM</span>
</span></span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a><span class="hll">        <span class="nb">print</span><span class="p">(</span><span class="s2">"puck_pos"</span><span class="p">,</span> <span class="n">puck_pos</span><span class="p">)</span>
</span></span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="hll">
</span></span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="hll">        <span class="n">env</span><span class="o">.</span><span class="n">set_puck_position</span><span class="p">([</span><span class="n">puck_pos</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">puck_pos</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
</span></span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a>        <span class="n">action</span><span class="p">,</span> <span class="n">_state</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="n">deterministic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a>        <span class="n">obs</span><span class="p">,</span> <span class="n">reward</span><span class="p">,</span> <span class="n">done</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="n">step</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="hll">        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>
</span></span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="hll">        <span class="c1"># agent pos., target pos. </span>
</span></span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a><span class="hll">        <span class="n">bin_vals</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">'4f'</span><span class="p">,(</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">env</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">env</span><span class="o">.</span><span class="n">PPM</span><span class="p">,</span> <span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">env</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">env</span><span class="o">.</span><span class="n">PPM</span><span class="p">,</span> <span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">-</span><span class="n">env</span><span class="o">.</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">env</span><span class="o">.</span><span class="n">PPM</span><span class="p">,</span> <span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">-</span><span class="n">env</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="n">env</span><span class="o">.</span><span class="n">PPM</span><span class="p">)</span>
</span></span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="hll">        <span class="n">send_socket</span><span class="o">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">bin_vals</span><span class="p">,</span> <span class="p">(</span><span class="n">client_ip</span><span class="p">,</span> <span class="n">port_send</span><span class="p">))</span>
</span></span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a>        <span class="n">total_reward</span> <span class="o">=</span> <span class="n">total_reward</span> <span class="o">+</span> <span class="n">reward</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a>        <span class="n">env</span><span class="o">.</span><span class="n">render</span><span class="p">()</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"total reward"</span><span class="p">,</span> <span class="n">total_reward</span><span class="p">)</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="c1"># Close the environment</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="n">env</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></code></pre></div></td></tr></table></div>
<h2 id="ai-agenti">AI agenti</h2>
<p>Spremembne v python skripti <code>circ_env.py</code></p>
<ul>
<li><code>__init__</code></li>
</ul>
<p>Za vrstico <code>self.create_agent(agent_radius_px, 'k')</code> je potrebno postaviti agenta na sredino delovnega prostora s funkcijo <code>reset_agent</code>.</p>
<p>``` py highlight="2"
        self.create_agent(agent_radius_px, 'k') 
        self.reset_agent((self.width/2, self.height/2))
</p><div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>- `reset`
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>Potrebno je zakomentirati vrstico za resetiranje pozicije agenta. Če se pobira pozicijo tarče z zaslona, je potrebno zakomntirati tudi vrstico za resetiranje pozicije tarče.
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>``` py 
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        #self.reset_agent((np.random.uniform(self.agent_radius*1.5, self.width - self.agent_radius*1.5), np.random.uniform(self.agent_radius*1.5, self.height - self.agent_radius*1.5)))
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>        #self.reset_puck((np.random.uniform(self.object_radius+self.agent_radius*3, self.width - self.object_radius-self.agent_radius*3), np.random.uniform(self.object_radius+self.agent_radius*3, self.height - self.object_radius-self.agent_radius*3)))
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        #self.reset_target((np.random.uniform(self.agent_radius*2, self.width - self.agent_radius*2), np.random.uniform(self.agent_radius*2, self.height - self.agent_radius*2)))
</span></code></pre></div>
<ul>
<li><code>step</code></li>
</ul>
<p>Na koncu kode za nagrado je potrebno postaviti zastavico <code>done</code> na <code>False</code>, da se epozoda ne konča.</p>
<p>``` py highlight="1"
        done = False</p>
<div class="language-text highlight"><pre><span></span><code>    # Reward function stop
    ############ DO TUKAJ SPREMINJATE
</code></pre></div>
<p>```


</p>
<h2 id="zagon-na-robotu">Zagon na robotu</h2>
<h3 id="unity-simulink">Unity &amp; Simulink</h3>
<p>Pot do projekta z Unity in Simulink projekta
<code>D:\VAJE\2023\VR</code>

Pot do Simulink sheme
<code>D:\VAJE\2023\VR\RL\EnvCirc\matlab</code>
</p>
<h3 id="unity">Unity</h3>
<p>Zažene se UnityHub in projekt. Še bolje je zagnati kar <code>FrankaPandaIK.exe</code> aplikacijo, ki je na <code>D:\VAJE\2023\VR\RL\EnvCircAplikacija</code>.
</p>
<h3 id="simulink">Simulink</h3>
<p>Shema z imenom <code>franka_control.slx</code> v mapi <code>D:\VAJE\2023\VR\RL\EnvCirc\matlab</code>.
</p>
<h3 id="ubuntu-linux-rt-libfranka">Ubuntu Linux RT Libfranka</h3>
<p>Terminal

<code>console
cd users/aljazb/Control_Libfranka/libfranka/build/
./Control_Libfranka 192.168.4.20</code></p>
<h3 id="postopek-zaganjanja">Postopek zaganjanja</h3>
<ol>
<li>Virtual machine <em>Windows 10</em>: zaženi Unity aplikacijo.</li>
<li>Virtual machine <em>Ubuntu Linux RT Libfranka</em>: zaženi <code>./Control_Libfranka 192.168.4.20</code>.</li>
<li>Virtual machine <em>Windows 10</em>: zaženi <code>franka_control.slx</code>. V uporabniškem vmesniku izberi </li>
<li><code>Enable Movement</code>-<code>On</code>, </li>
<li><code>Grasp Mode</code>-<code>On</code>-<code>Close</code>, ko se prijemalo zapre sledi</li>
<li><code>Grasp Mode</code>-<code>Off</code></li>
<li><code>Move to Default Pose</code>, robot se bo premaknil v začetno postavitev,</li>
<li><code>Enable Movement</code>-<code>Off</code>,</li>
<li><code>Enable Movement</code>-<code>On</code>,</li>
<li><code>Application Mode</code>-<code>On</code>.</li>
<li>Računalnik <em>AI</em>: zaženi <code>python load_circ_modelUDP.py</code>.</li>
<li>Virtual machine <em>Windows 10</em>: v uporabniškem vmesniku izberi </li>
<li><code>Application Mode</code>-<code>Off</code>.</li>
<li><code>Enable Movement</code>-<code>Off</code>.</li>
<li>Po končanem izvajanju, ugasni <code>franka_control.slx</code> skripto, da se UDP buffer izprazni.</li>
</ol>
<h2 id="videji-primera-na-robotu">Videji primera na robotu</h2>
<p>Videje je potrebno odpreti v novem oknu </p>
<p><a href="https://youtu.be/Gal38w0Grzw">Primer 1</a></p>
<p><a href="https://youtu.be/wEuomAma0GY">Primer 2</a></p>
<p><a href="https://youtu.be/UMTpDaCiZ8Q">Primer 3</a></p></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.b78d2936.min.js"></script>
      
    
  </body>
</html>